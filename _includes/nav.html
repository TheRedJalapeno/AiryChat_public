<!-- _includes/nav.html -->
<header id="main-header" data-height-onload="84" data-height-loaded="true" data-fixed-height-onload="84">
  <nav class="container clearfix">
    <div class="logo_container">
      <a href="{{ site.baseurl }}" title="AiryChat" rel="home" id="logo">
        <img src="{{ site.baseurl }}/assets/images/logo_pill1.webp" alt="AiryChat" id="logo">
      </a>
    </div>
    
    <!-- Hamburger Toggle Button (hidden on desktop) -->
    <button id="nav-toggle" class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
    
    <!-- Navigation Menu -->
    <div class="nav-menu">
      <div class="menu-item-container">
        <a href="{{ site.baseurl }}/classic-app" title="AiryChat Classic" rel="classic" class="nav-link">Classic App</a>
      </div>
      <div class="menu-item-container">
        <a href="{{ site.baseurl }}/business" title="Business Services" rel="business" class="nav-link">AI for Business</a>
      </div>
      <div class="menu-item-container">
        <a href="{{ site.baseurl }}/sarah" title="Sarah" rel="sarah" class="nav-link">Demo of Sarah</a>
      </div>
    </div>
  </nav>
</header>


<script>
  // Mobile navigation toggle: wire up the hamburger and backdrop
(function setupMobileNav(){
  const toggle = document.getElementById('nav-toggle');
  const navMenu = document.querySelector('.nav-menu');
  
  // Create backdrop element
  let backdrop = document.getElementById('nav-backdrop');
  if(!backdrop){
    backdrop = document.createElement('div');
    backdrop.id = 'nav-backdrop';
    document.body.appendChild(backdrop);
  }
  
  function openNav(){
    navMenu.classList.add('open');
    backdrop.classList.add('show');
    toggle.setAttribute('aria-expanded','true');
    document.body.style.overflow = 'hidden'; // Prevent scrolling when menu is open
  }
  
  function closeNav(){
    navMenu.classList.remove('open');
    backdrop.classList.remove('show');
    toggle.setAttribute('aria-expanded','false');
    document.body.style.overflow = ''; // Restore scrolling
  }
  
  // Toggle handler
  toggle && toggle.addEventListener('click', ()=>{
    if(navMenu.classList.contains('open')) closeNav(); 
    else openNav();
  });
  
  // Clicking the backdrop closes the nav
  backdrop.addEventListener('click', closeNav);
  
  // Close menu when clicking a link
  const navLinks = navMenu.querySelectorAll('.nav-link');
  navLinks.forEach(link => {
    link.addEventListener('click', closeNav);
  });
  
  // Close nav when window is resized to desktop to avoid stuck state
  window.addEventListener('resize', ()=>{
    if(window.innerWidth > 800){
      navMenu.classList.remove('open');
      backdrop.classList.remove('show');
      document.body.style.overflow = '';
    }
  });
})();
</script>